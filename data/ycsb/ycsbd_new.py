#!/usr/bin/env python

from gnuplot import *
from common import *

xstore_points = points = [(912957,0.00475616,0.0976914,),(3.76122e+07,0.00552291,0.11971,),(3.80298e+07,0.00511142,0.151997,),(3.81367e+07,0.00490475,0.202064,),(3.82465e+07,0.00480535,0.250424,),(3.83204e+07,0.00471116,0.278915,),(3.68317e+07,0.00468427,0.321063,),(3.77837e+07,0.00463088,0.361207,),(3.70196e+07,0.0045632,0.399844,),(3.59903e+07,0.00451439,0.438072,),(3.54502e+07,0.0044708,0.460626,),(3.33983e+07,0.00444906,0.482274,),(3.46343e+07,0.0172992,0.459582,),(3.40269e+07,0.0128567,0.492679,),(3.30434e+07,0.0108451,0.515759,),(3.25763e+07,0.00934415,0.536474,),(3.10135e+07,0.00782298,0.563294,),(3.05594e+07,0.00677379,0.59016,),(3.0019e+07,0.00625868,0.605086,),(2.95972e+07,0.00584498,0.620347,),(2.89296e+07,0.00559056,0.636361,),(2.84634e+07,0.00530873,0.650287,),(2.80921e+07,0.00512711,0.662792,),(3.30414e+07,0.0115313,0.426055,),(3.68479e+07,0.0109463,0.350466,),(3.56617e+07,0.00950466,0.375275,),(3.62121e+07,0.00837859,0.39713,),(3.54282e+07,0.00716501,0.42626,),(3.44001e+07,0.00632458,0.454263,),(3.37006e+07,0.00577086,0.480542,),(3.27882e+07,0.00536483,0.506352,),(3.17832e+07,0.00511317,0.529336,),(3.09724e+07,0.00491419,0.551637,),(3.03738e+07,0.00482274,0.566761,),(2.65044e+07,0.00474702,0.578613,),(3.61676e+07,0.0139142,0.357299,),(3.6205e+07,0.0109405,0.378132,),(3.47406e+07,0.00909325,0.406665,),(3.48836e+07,0.00779729,0.433414,),(3.41488e+07,0.00716308,0.450672,),(3.37667e+07,0.00671325,0.466519,),(3.28749e+07,0.00620435,0.491013,),(3.19237e+07,0.00578089,0.512586,),(3.13796e+07,0.00558187,0.527787,),(3.09791e+07,0.00541439,0.54124,),(3.01702e+07,0.00513916,0.559817,),(2.97534e+07,0.0049683,0.57817,),(2.91954e+07,0.00480724,0.593707,),(2.81845e+07,0.00467803,0.609158,),(2.89533e+07,0.0100032,0.531171,),(3.60142e+07,0.0156103,0.361202,),(3.5633e+07,0.0132243,0.380661,),(3.512e+07,0.0107881,0.407477,),(3.28581e+07,0.00918023,0.430991,),(3.40664e+07,0.00838776,0.446242,),(3.36526e+07,0.0077295,0.460441,),(3.31143e+07,0.00721502,0.474885,),(3.26856e+07,0.00679696,0.48731,),(3.1862e+07,0.00630839,0.507201,),(3.11416e+07,0.00586437,0.524545,),(3.07772e+07,0.00566336,0.536326,),(3.01538e+07,0.00538653,0.553052,),(2.93221e+07,0.00514387,0.567732,),(2.89368e+07,0.00504825,0.577315,),(2.86282e+07,0.00492692,0.586873,),(2.80881e+07,0.00476769,0.600818,),(2.77819e+07,0.00465637,0.612568,),(2.72818e+07,0.00458906,0.622078,),(2.71345e+07,0.00451346,0.629324,),(2.67978e+07,0.0044902,0.638555,),(2.89345e+07,0.00720144,0.605973,),(3.50259e+07,0.0168686,0.378224,),(3.46572e+07,0.0145619,0.394922,),(3.4521e+07,0.012797,0.411348,),(3.42494e+07,0.0113722,0.425441,),(3.38403e+07,0.0102035,0.438538,),(3.32533e+07,0.00893292,0.457047,),(3.31305e+07,0.0079781,0.475662,),(3.31178e+07,0.00744377,0.485848,),(3.2485e+07,0.00699979,0.497529,),(3.16876e+07,0.00668941,0.50799,),(3.15538e+07,0.00631668,0.518033,),(3.13757e+07,0.00595324,0.5326,),(3.09393e+07,0.00564771,0.547116,),(3.04548e+07,0.00545705,0.555646,),(3.03133e+07,0.00525916,0.563896,),(3.02444e+07,0.00506773,0.578205,),(2.99208e+07,0.00491508,0.590392,),(2.9408e+07,0.00481153,0.598023,),(2.89587e+07,0.00472746,0.606994,),(2.86566e+07,0.00466032,0.614197,),(2.81565e+07,0.00458329,0.622555,),(2.79121e+07,0.0044911,0.632772,),(2.73054e+07,0.00442321,0.643817,),(2.68571e+07,0.00435749,0.649795,),(2.95417e+07,0.0100057,0.544229,),(3.48207e+07,0.0157475,0.37062,),(3.43121e+07,0.0139339,0.385088,),(3.4127e+07,0.0124398,0.39713,),(3.40758e+07,0.0112468,0.411024,),(3.35154e+07,0.00982339,0.427555,),(3.31833e+07,0.00880394,0.444294,),(3.26157e+07,0.00830685,0.45517,),(3.26029e+07,0.00782752,0.465377,),(3.2333e+07,0.00721858,0.480149,),(3.15164e+07,0.00669695,0.494269,),(3.17732e+07,0.00642117,0.50365,),(3.14119e+07,0.00618775,0.512618,),(3.05002e+07,0.00591232,0.525803,),(3.0099e+07,0.00565915,0.538156,),(2.94251e+07,0.00549671,0.545559,),(2.91278e+07,0.00539663,0.553525,),(2.91907e+07,0.00522594,0.565058,),(2.90542e+07,0.00508874,0.576582,),(2.8908e+07,0.0049998,0.583622,),(2.84383e+07,0.00490628,0.589884,),(2.80048e+07,0.00487591,0.597758,),(2.78043e+07,0.00477774,0.603991,),(2.75051e+07,0.00470603,0.610909,),(2.72514e+07,0.00462029,0.620312,),(2.70048e+07,0.00457042,0.630693,),(2.71015e+07,0.00454616,0.636504,),(2.65981e+07,0.004478,0.642047,),(2.63735e+07,0.00443314,0.651144,),(3.36333e+07,0.0172547,0.403885,),(3.44182e+07,0.0190497,0.376735,),(3.40921e+07,0.0190965,0.385476,),(3.33557e+07,0.0164509,0.402075,),(3.26745e+07,0.0141234,0.420274,),(3.26887e+07,0.0129095,0.431541,),(3.21444e+07,0.011832,0.44177,),(3.23135e+07,0.0109387,0.452186,),(3.18346e+07,0.00995426,0.467569,),(3.16705e+07,0.00908334,0.480933,),(3.15043e+07,0.00861789,0.490426,),(3.07715e+07,0.00799791,0.502565,),(3.05119e+07,0.00747757,0.514299,),(3.01272e+07,0.00719129,0.522695,),(2.97879e+07,0.00692918,0.530114,),(2.95875e+07,0.00662808,0.542726,),(2.93728e+07,0.00632214,0.553343,),(2.92725e+07,0.00613319,0.559609,),(2.89121e+07,0.00597497,0.567251,),(2.88645e+07,0.00584779,0.573149,),(2.83237e+07,0.00574495,0.579808,),(2.79682e+07,0.00559485,0.586421,),(2.75946e+07,0.00544411,0.595887,),(2.76447e+07,0.00529757,0.605221,),(2.73139e+07,0.00522146,0.611131,),(2.71984e+07,0.00510472,0.617215,),(2.71316e+07,0.00501312,0.624239,),(2.66431e+07,0.00491828,0.633061,),(2.63663e+07,0.00484166,0.637879,),(2.63438e+07,0.00481051,0.643768,),(2.6329e+07,0.00473302,0.648989,),(2.64173e+07,0.00468265,0.654501,),(2.62686e+07,0.00462465,0.661953,),(2.54681e+07,0.00456561,0.669078,),(2.4448e+07,0.00457238,0.674881,),(3.12261e+07,0.0159147,0.453603,),(3.39395e+07,0.0161998,0.386625,),(3.36045e+07,0.0140452,0.402301,),(3.3477e+07,0.012965,0.413768,),(3.33054e+07,0.0119846,0.423505,),(3.30226e+07,0.0111057,0.432919,),(3.23699e+07,0.0104256,0.441948,),(3.12054e+07,0.00982813,0.451138,),(3.22206e+07,0.00904486,0.462744,),(3.15843e+07,0.0083922,0.475159,),(3.14931e+07,0.00800975,0.482762,),(3.13529e+07,0.00768545,0.489694,),(3.11194e+07,0.00737727,0.49729,),(3.05949e+07,0.00700992,0.507986,),(3.02999e+07,0.00666307,0.518313,),(2.9945e+07,0.00644788,0.524973,),(2.96078e+07,0.00627674,0.531414,),(2.96837e+07,0.00614921,0.538886,),(2.93544e+07,0.00590706,0.547699,),(2.91245e+07,0.00570583,0.556484,),(2.91998e+07,0.00559358,0.561674,),(2.84335e+07,0.00549604,0.568545,),(2.84998e+07,0.00533617,0.576829,),(2.83425e+07,0.00517916,0.58437,),(2.80712e+07,0.00513103,0.590901,),(2.7784e+07,0.00505816,0.595223,),(2.74983e+07,0.00500675,0.599772,),(2.7301e+07,0.00490894,0.608026,),(2.70491e+07,0.00480373,0.614795,),(2.73731e+07,0.00473438,0.618711,),(2.68238e+07,0.00468713,0.624712,),(2.67141e+07,0.00461283,0.631505,),(2.639e+07,0.00454718,0.637513,),(2.64412e+07,0.00447544,0.640803,),(2.65473e+07,0.00442951,0.646355,),(2.61136e+07,0.0043818,0.652373,),(2.57868e+07,0.00433804,0.658618,),(2.57382e+07,0.00429944,0.663159,),(2.48665e+07,0.00536315,0.657751,),(3.36438e+07,0.018239,0.380687,),(3.37616e+07,0.0197569,0.379855,),]

rpc_points = [(457494,0,1.00002,),(2.02148e+07,0,1,),(2.08717e+07,0,0.999999,),(2.0904e+07,0,1,),(2.08648e+07,0,1,),(2.0715e+07,0,1,),(2.07399e+07,0,1,),(2.05797e+07,0,1,),(2.06804e+07,0,1,),(2.06929e+07,0,1,),(2.0436e+07,0,1,),(2.01704e+07,0,1,),(2.04213e+07,0,1,),(2.02138e+07,0,1,),(2.03954e+07,0,1,),(2.02088e+07,0,1,),(2.02182e+07,0,1,),(2.02737e+07,0,1,),(2.01755e+07,0,1,),(1.96091e+07,0,1,),(1.98548e+07,0,1,),(1.98732e+07,0,1,),(1.93516e+07,0,1,),(1.98371e+07,0,1,),(1.97981e+07,0,1,),(1.92553e+07,0,1,),(1.97326e+07,0,1,),(1.96134e+07,0,1,),(1.97118e+07,0,1,),(1.95302e+07,0,1,),(1.87734e+07,0,1,),(1.9375e+07,0,1,),(1.94004e+07,0,1,),(1.90891e+07,0,1,),(1.92252e+07,0,1,),(1.92286e+07,0,1,),(1.91367e+07,0,1,),(1.91972e+07,0,1,),(1.92072e+07,0,1,),(1.92416e+07,0,1,),(1.92755e+07,0,1,),(1.90753e+07,0,1,),(1.80299e+07,0,1,),(1.90988e+07,0,1,),(1.91792e+07,0,1,),(1.87979e+07,0,1,),(1.9e+07,0,0.999999,),(1.89316e+07,0,1,),(1.91939e+07,0,1,),(1.93117e+07,0,1,),(1.92919e+07,0,0.999999,),(1.90999e+07,0,1,),(1.91087e+07,0,1,),(1.9034e+07,0,1,),(1.90172e+07,0,1,),(1.86735e+07,0,1,),(1.85338e+07,0,1,),(1.89714e+07,0,1,),(1.89476e+07,0,1,),(1.75796e+07,0,1,),(1.90497e+07,0,1,),(1.89768e+07,0,1,),(1.88747e+07,0,1,),(1.89464e+07,0,1,),(1.89034e+07,0,1,),(1.88282e+07,0,1,),(1.87917e+07,0,1,),(1.90522e+07,0,1,),(1.90538e+07,0,1,),(1.90112e+07,0,0.999999,),(1.9031e+07,0,1,),(1.89847e+07,0,0.999999,),(1.83821e+07,0,1,),(1.79166e+07,0,1,),(1.85487e+07,0,1,),(1.86817e+07,0,1,),(1.85635e+07,0,1,),(1.81799e+07,0,1,),(1.87864e+07,0,0.999999,),(1.87453e+07,0,1,),(1.87644e+07,0,1,),(1.86162e+07,0,1,),(1.86968e+07,0,1,),(1.84456e+07,0,0.999999,),(1.85202e+07,0,1,),(1.83891e+07,0,1,),(1.85225e+07,0,1,),(1.87348e+07,0,1,),(1.86368e+07,0,1,),(1.84035e+07,0,1,),(1.83375e+07,0,1,),(1.83995e+07,0,1,),(1.77034e+07,0,0.999999,),(1.8136e+07,0,1,),(1.81351e+07,0,0.999999,),(1.84602e+07,0,1,),(1.84097e+07,0,1,),(1.78126e+07,0,1,),(1.81316e+07,0,1,),(1.81639e+07,0,1,),(1.81598e+07,0,1,),(1.81897e+07,0,0.999999,),(1.81134e+07,0,1,),(1.81356e+07,0,1,),(1.8165e+07,0,1,),(1.79966e+07,0,1,),(1.80395e+07,0,1,),(1.81004e+07,0,1,),(1.7944e+07,0,1,),(1.79943e+07,0,1,),(1.79972e+07,0,1,),(1.80077e+07,0,1,),(1.81421e+07,0,1,),(1.81201e+07,0,1,),(1.82439e+07,0,1,),(1.83946e+07,0,1,),(1.77978e+07,0,1,),(1.82621e+07,0,0.999999,),(1.78587e+07,0,1,),(1.80214e+07,0,0.999999,),(1.8135e+07,0,1,),(1.79416e+07,0,1,),(1.81379e+07,0,1,),(1.80594e+07,0,1,),(1.81693e+07,0,1,),(1.78991e+07,0,1,),(1.80518e+07,0,1,),(1.79498e+07,0,0.999999,),(1.79803e+07,0,1,),(1.80083e+07,0,1,),(1.79197e+07,0,1,),(1.78651e+07,0,1,),(1.80007e+07,0,1,),(1.76721e+07,0,1,),(1.76642e+07,0,1,),(1.77051e+07,0,1,),(1.77034e+07,0,1,),(1.77849e+07,0,1,),(1.76639e+07,0,1,),(1.76076e+07,0,1,),(1.76255e+07,0,1,),(1.75916e+07,0,1,),(1.76338e+07,0,1,),(1.77339e+07,0,1,),(1.76228e+07,0,1,),(1.72427e+07,0,1,),(1.74449e+07,0,1,),(1.75989e+07,0,1,),(1.76203e+07,0,1,),(1.74894e+07,0,1,),(1.73932e+07,0,1,),(1.75626e+07,0,1,),(1.7661e+07,0,1,),(1.7562e+07,0,1,),(1.74869e+07,0,1,),(1.75313e+07,0,1,),(1.75209e+07,0,1,),(1.74283e+07,0,1,),(1.73861e+07,0,0.999999,),(1.73719e+07,0,1,),(1.73873e+07,0,1,),(1.74017e+07,0,1,),(1.74044e+07,0,1,),(1.74432e+07,0,1,),(1.74966e+07,0,1,),(1.75135e+07,0,1,),(1.75107e+07,0,1,),(1.75133e+07,0,1,),(1.74997e+07,0,1,),(1.74705e+07,0,1,),(1.748e+07,0,1,),(1.73836e+07,0,1,),(1.73979e+07,0,1,),(1.73111e+07,0,1,),(1.73708e+07,0,1,),(1.73043e+07,0,1,),(1.7001e+07,0,1,),(1.71448e+07,0,1,),(1.73324e+07,0,1,),(1.72693e+07,0,1,),(1.72727e+07,0,0.999999,),(1.687e+07,0,1,),(1.73281e+07,0,1,),(1.73521e+07,0,1,),(1.72821e+07,0,1,),(1.74212e+07,0,1,),(1.73633e+07,0,1,),(1.72814e+07,0,1,),(1.73085e+07,0,1,),(1.73731e+07,0,1,),(1.73446e+07,0,1,),(1.73239e+07,0,1,),(1.73458e+07,0,1,),(1.74816e+07,0,1,),(1.74148e+07,0,1,),(1.7416e+07,0,0.999999,),(1.74268e+07,0,1,),(1.75345e+07,0,1,),(1.75899e+07,0,1,),(1.75297e+07,0,1,),]


xstore_thpt = extract_one_dim(xstore_points,0)
xstore_invalid = extract_one_dim(xstore_points,1)
xstore_fallback = extract_one_dim(xstore_points,2)

rpc_thpt = extract_one_dim(rpc_points,0)

data = [xstore_thpt[1:-1],rpc_thpt[1:-1]]
data1 = [xstore_invalid[1:-1],xstore_fallback[1:-1]]

#ylim = 1
ylabel = "Thpt"
legends = ["Xstore","RPC"]
legends1 = ["Xstore","RPC"]
#ylim = 4.83285e+07

def main():
    output_aligned_lines("ycsbd",data,legends)
    output_aligned_lines("ycsbd_ratio",data1,["Slowdown","Fallback"])

if __name__ == "__main__":
    main()
