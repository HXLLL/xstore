#!/usr/bin/env python

from gnuplot import *

"""
 Used experiment setup:
 - learned.toml:
   {

[[stages]]
type = "lr"
parameter = 1

[[stages]]
type = "lr"
## typically, they use much larger models
parameter = 100000 ## larger is better

}

keys: 10,000,000; using YCSBHash
1 fstore server (12 threads).

Clients use the same #thread as server, each with 6 coroutine.
...

"""
# Thpt in millions req/sec, latency in us.
sc_thpts = [9,
            18.2,
            23.124,
            27.7,
            28.1,
            28.19,
            28.193,
            28.18,
            28.1864
            ]
sc_lats = [7.71426,
           7.66342,
           8.67038,
           9.93555,
           11.3966,
           14.1518,
           16.351,
           18.8078,
           20.6985
           ]

# using tree-depth 6
btree_thpts = [5.30756805,
               8.97267647,
               9.174868,
               9.173,
               9.173,
               9.18,
               9.173,
               9.17,
               9.1]
btree_lats = [13.7094,
              16.1227,
              23.0687,
              26.7342,
              34.7452,
              42.4273,
              51.8255,
              61.6944,
              68.5529]

# rpc
rpc_thpts = [
    12.16014656,
    16.28620909,
    16.44803465,
    16.38718893,
    16.44803465,
    16.41509677,
    18.13021120,
    16.08792947,
    16.08737626,
]

rpc_lats = [
    5.5892,
    8.14026,
    11.0355,
    16.6705,
    20.5816,
    24.4916,
    26.2036,
    34.4559,
    38.0463
]


assert(len(sc_thpts) == len(sc_lats))
assert(len(btree_thpts) == len(btree_lats))
assert(len(sc_thpts) == len(btree_thpts))


sc_thpts_2 = []
sc_lats_2 = []

# all coroutine = 1
rpcs = {
    1: (5549912.79, 4.05586),
    2: (10296329.79, 4.28605),
    4: (15306509.14, 5.25539),
    6: (19427972.95, 6.26114),
    8: (21389414.28, 7.33336),
    10: (23022204.94, 8.44133),
    12: (24533657.88, 9.81435),
    14: (24871871.91, 11.4494),
    15: (24969322.50, 11.8808),
}

scs = {
    1: (7645570.34, 2.96505),
    2: (15013575.08, 2.9389),
    4: (29737705.10, 3.0104),
    6: (42453908.72, 3.05124),
    8: (53603932.76, 3.40037),
    10: (60553864.08, 3.51059),
    12: (63489697.39, 4.12844),
    14: (63522788.45, 4.8107),
    15: (63548521.94, 5.11191),
}

nts = {
    1: (2542186.22, 9.603),
    2: (4877335.95, 9.51031),
    4: (9298302.81, 10.1013),
    6: (13332259.80, 10.2812),
    8: (15910822.28, 11.3166),
    10: (17473336.21, 12.9502),
    12: (17827128.82, 14.5574),
    14: (17727486.48, 17.0635),
    15: (17308896.43, 18.2394),
}


def main():
    #    output_gnuplot_res((sc_thpts, sc_lats))
    output_res_2("ycsba", scs, rpcs, nts)


if __name__ == "__main__":
    main()
